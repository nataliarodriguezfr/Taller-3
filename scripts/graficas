#importamos librerias necesarias
import pandas as pd
import matplotlib as mpl
import matplotlib.pyplot as plt
import numpy as np
from pathlib import Path
import pingouin as pg
from lets_plot import *

LetsPlot.setup_html(no_js=True)

#importamos archivo csv
url = "https://raw.githubusercontent.com/nataliarodriguezfr/Taller-3/9f4d8aea5f1dc38cdab50e644f0316559f34d1a9/data/raw_data/tablas_temperatura.csv"

df = pd.read_csv(url, skiprows=37)  # Ajusta skiprows según el contenido
print(df.head())

#grafico de linea con la anomalia de temperatura promedio y tiempo

#grafico promedios de estacion
# Seleccionar las columnas de estaciones
estaciones = ['DJF', 'MAM', 'JJA', 'SON']

plt.figure(figsize=(14,7))

# Graficar cada estación
for estacion in estaciones:
    plt.plot(df.index, df[estacion], label=estacion)

plt.title('Anomalía de temperatura promedio por estación (1880 - Último año disponible)')
plt.xlabel('Año')
plt.ylabel('Anomalía de temperatura (°C)')
plt.legend(title='Estaciones')
plt.grid(True)
plt.show()


#grafico con promedios de anomalias mensuales


#Promedios anomalias anuales

columna_anual = 'J-D'

plt.figure(figsize=(12,6))
plt.plot(df.index, df[columna_anual], label='Anomalía anual promedio (J-D)', color='darkblue')
plt.title('Anomalía de temperatura anual promedio (1880 - Último año disponible)')
plt.xlabel('Año')
plt.ylabel('Anomalía de temperatura (°C)')
plt.grid(True)
plt.legend()
plt.show()
