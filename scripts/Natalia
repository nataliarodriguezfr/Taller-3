# -*- coding: utf-8 -*-
"""
Created on Tue Sep  2 13:40:00 2025

@author: natal
"""


#importamos librerias necesarias
import pandas as pd
import matplotlib as mpl
import matplotlib.pyplot as plt
import numpy as np
from pathlib import Path
import pingouin as pg
from lets_plot import *

LetsPlot.setup_html(no_js=True)

#importamos archivo csv
url = "https://raw.githubusercontent.com/nataliarodriguezfr/Taller-3/9f4d8aea5f1dc38cdab50e644f0316559f34d1a9/data/raw_data/tablas_temperatura.csv"

df = pd.read_csv(url, skiprows=1, na_values="***")  # Ajusta skiprows según el contenido
print(df.head())

#Graficar eligiendo un mes
mes = "Oct"
df_oct = df[["Year", mes]].dropna() #Para reducir la base de datos a solo año y octubre
plt.figure(figsize=(12,6)) 
plt.plot(df_oct["Year"], df_oct[mes], color="blue") #Grafica
plt.xticks(np.arange(1880, 2025, 10))  # mostrar cada 10 años
plt.title("Anomalías de temperatura en Octubre (1880 - 2025)")
plt.xlabel("Año")
plt.ylabel("Anomalía de temperatura (°C)")
plt.grid(True, alpha=0.3)
plt.legend()
plt.show()

#Graficar promedio de estaciones
estaciones = ["DJF", "MAM", "JJA", "SON"]    
for estacion in estaciones:
    plt.plot(df["Year"], df[estacion], label=estacion)

plt.xticks(np.arange(1880, 2026, 20))  # mostrar cada 10 años
plt.title('Anomalía de temperatura promedio por estación (1880 - 2025)')
plt.xlabel('Año')
plt.ylabel('Anomalía de temperatura (°C)')
plt.legend(title='Estaciones')
plt.grid(True)
plt.show()


#Graficar promedios anuales
prom_año = "J-D"
plt.figure(figsize=(12,6)) 
plt.plot(df["Year"], df[prom_año], color="red") #Grafica
plt.xticks(np.arange(1880, 2025, 10))  # mostrar cada 10 años
plt.title('Anomalía de temperatura promedio anuales (1880 - 2025)')
plt.xlabel('Año')
plt.ylabel('Anomalía de temperatura (°C)')
plt.grid(True)
plt.show()

